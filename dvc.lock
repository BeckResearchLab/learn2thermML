schema: '2.0'
stages:
  ogt_protein_classifier_train_evaluate:
    cmd: torchrun --nproc_per_node gpu pipeline/ogt_protein_classifier_train_evaluate.py
    deps:
    - path: ./data/ogt_protein_classifier/data
      md5: d193826bd0a117473eff018d8ee815d3.dir
      size: 54244726
      nfiles: 208
    - path: ./l2tml_utils/model_utils.py
      md5: 13c9597c906c8f2291cc7902be3c622d
      size: 4167
    - path: ./pipeline/ogt_protein_classifier_train_evaluate.py
      md5: a1f4f19ded183929cf9d94d2d639ab7f
      size: 14570
    params:
      params.yaml:
        ogt_protein_classifier_train_evaluate.batch_size: 20
        ogt_protein_classifier_train_evaluate.dev_subsample_data: 160
        ogt_protein_classifier_train_evaluate.dropout: 0.0
        ogt_protein_classifier_train_evaluate.epochs: 50
        ogt_protein_classifier_train_evaluate.fp16: true
        ogt_protein_classifier_train_evaluate.grad_accum: 1
        ogt_protein_classifier_train_evaluate.grad_checkpointing: true
        ogt_protein_classifier_train_evaluate.lr: 5e-05
        ogt_protein_classifier_train_evaluate.lr_scheduler: linear
        ogt_protein_classifier_train_evaluate.model: protbert
        ogt_protein_classifier_train_evaluate.n_save_per_epoch: 1
        ogt_protein_classifier_train_evaluate.protocol: finetune
    outs:
    - path: ./data/ogt_protein_classifier/dvclive/metrics.json
      md5: d1c64751caa6bd3ed3dac1f05faf1852
      size: 327
    - path: ./data/ogt_protein_classifier/dvclive/plots
      md5: c50cee5dbcfa656286a5cbbda0183786.dir
      size: 6602
      nfiles: 10
    - path: ./data/ogt_protein_classifier/dvclive/report.md
      md5: 5399c9b84f81a36d1f40a8d7d997dfb1
      size: 1056
    - path: ./data/ogt_protein_classifier/model
      md5: 77a4cd4ebef26e0fe4d0ee83debd5f20.dir
      size: 127680884218
      nfiles: 231
    - path: ./data/ogt_protein_classifier/model_metrics.yaml
      md5: 9d17993b2bc870e6fbe60dbd2d7dcc28
      size: 23084
  ogt_protein_classifier_data_prep:
    cmd: python pipeline/ogt_protein_classifier_data_prep.py
    deps:
    - path: ./data/database
      md5: 3d1fb0c6b918014c9959ebab31ca9c32
      size: 34096820224
    - path: ./l2tml_utils/data_utils.py
      md5: 37c459566103785886ffa2d02f094a7d
      size: 5836
    - path: ./pipeline/ogt_protein_classifier_data_prep.py
      md5: 08f37ff3de24b16eb0d24e3170c68eed
      size: 8792
    params:
      params.yaml:
        ogt_protein_classifier_data_prep.data_batch_size: 200
        ogt_protein_classifier_data_prep.dev_keep_columns: true
        ogt_protein_classifier_data_prep.dev_sample_init_data: false
        ogt_protein_classifier_data_prep.max_protein_len: 250
        ogt_protein_classifier_data_prep.max_upsampling: 0.0
        ogt_protein_classifier_data_prep.min_balance: 0.5
        ogt_protein_classifier_data_prep.ogt_window:
        - 30.0
        - 60.0
        ogt_protein_classifier_data_prep.split_type: random
    outs:
    - path: ./data/ogt_protein_classifier/data
      md5: a22cd9c4c2cca47005af0c5180a61a6f.dir
      size: 52870662
      nfiles: 8
    - path: ./data/ogt_protein_classifier/data_metrics.yaml
      md5: 8cf8a4d91c8495ff4ddd0e24bb1f29d3
      size: 170
